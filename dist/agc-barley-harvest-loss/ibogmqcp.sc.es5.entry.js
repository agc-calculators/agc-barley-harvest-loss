/*! Built with http://stenciljs.com */
AgcBarleyHarvestLoss.loadBundle("ibogmqcp",["exports"],function(e){var t=window.AgcBarleyHarvestLoss.h,s=function(e,t){var s=e.querySelector('[name="'+t+'"]'),a=e.querySelector('[data-validates="'+t+'"');return s.checkValidity()?(s.className=s.className.replace(" invalid",""),a.style.display="none",!0):(-1===s.className.indexOf("invalid")&&(s.className+=" invalid"),a.style.display="block",!1)},a=function(e,t){return e.matches.call(e,t)},n=function(){function e(){this.socket="",this.tract="",this.mode="step",this.units={yieldLoss:"bu/acre",lossArea:"ft2"},this.currentStep=0,this.cache={},this.submitted=!1,this.results={}}return e.prototype.render=function(){var e=this;return t("div",null,t("form",{onSubmit:function(e){return e.preventDefault()},ref:function(t){return e.form=t},"data-wizard":"agc-barley-harvest-loss","data-wizard-mode":this.mode,class:"agc-wizard"},t("slot",null),t("section",{"data-wizard-section":"0"},t("div",{class:"agc-wizard__field"},t("label",{"data-i18n":"fields.kernels-counted"},"Kernels Counted"),t("input",{name:"kernelsCounted",type:"number",required:!0,min:"0",step:"1"}),t("p",{class:"agc-wizard__validation-message","data-i18n":"validation.kernels-counted.required","data-validates":"kernelsCounted"},"Please enter a whole number of zero or greater."),t("p",{"data-i18n":"hints.kernels-counted"},"â®¤ Enter the number of barley kernels counted on the ground within the specified area.")),t("div",{class:"agc-wizard__actions"},"step"===this.mode&&t("button",{class:"agc-wizard__actions-next","data-i18n":"actions.next",onClick:this.nextPrev.bind(this,1)},"Next ðŸ –"))),t("section",{"data-wizard-section":"1"},t("div",{class:"agc-wizard__field"},t("label",{"data-i18n":"fields.loss-area"},"Loss Area"),t("input",{name:"lossArea",type:"number",required:!0,min:"1",step:"1"}),t("p",{class:"agc-wizard__validation-message","data-i18n":"validation.loss-area.required","data-validates":"lossArea"},"Please enter a whole number of one or more."),t("p",{"data-i18n":"hints.loss-area"},"â®¤ Enter the area in square feet that was used to count kernels on the ground.")),t("div",{class:"agc-wizard__actions"},"step"===this.mode&&t("button",{class:"agc-wizard__actions-back","data-i18n":"actions.back",onClick:this.nextPrev.bind(this,-1)},"ðŸ ” Back"),t("button",{class:"agc-wizard__actions-next","data-i18n":"actions.finish",onClick:this.nextPrev.bind(this,"step"===this.mode?1:3)},"Calculate ðŸ –"))),t("section",{"data-wizard-results":!0},t("slot",{name:"results"}))))},e.prototype.showTab=function(e){"step"===this.mode&&(this.cache.sections[e].style.display="block"),this.socket&&this.agcStepChanged.emit({socket:this.socket,tract:this.tract,step:this.currentStep})},e.prototype.reset=function(){this.currentStep=0,this.submitted=!1,this.showTab(0)},e.prototype.validateForm=function(){var e=!0;return 0!==this.currentStep&&"full"!==this.mode||s(this.form,"kernelsCounted")||(e=!1),1!==this.currentStep&&"full"!==this.mode||s(this.form,"lossArea")||(e=!1),e},e.prototype.nextPrev=function(e,t){if(t&&t.preventDefault(),this.form.querySelector(":focus").classList.contains("agc-wizard__actions-next")){if("full"===this.mode){if(!this.validateForm())return!1}else if(1==e&&!this.validateForm())return!1;if("step"===this.mode&&(this.cache.sections[this.currentStep].style.display="none"),this.currentStep=this.currentStep+e,this.currentStep>=this.cache.sections.length)return this.submitted=!0,this.showResults.call(this),!1;this.showTab.call(this,this.currentStep)}},e.prototype.showResults=function(){var e=parseInt(this.form.querySelector('[name="kernelsCounted"').value),t=parseInt(this.form.querySelector('[name="lossArea"').value),s=(2,+(Math.round(new Number(e/t/14+"e+2").valueOf())+"e-2")),a={socket:this.socket,tract:this.tract,units:this.units,kernelsCounted:e,lossArea:t,yieldLoss:s};this.socket&&this.agcCalculated.emit({socket:this.socket,tract:this.tract,results:Object.assign({},a)}),this.results=Object.assign({},a),this.cache.results.forEach(function(e){e.style.display="block"})},e.prototype.handleAction=function(e){"reset"===e.detail.action&&this.reset()},e.prototype.componentDidLoad=function(){var e,t=Array.from(this.form.querySelectorAll("[data-wizard-section]")).map(function(e){return e}).map(function(e){return e}),n=Array.from(this.form.querySelectorAll("[data-wizard-results]")).map(function(e){return e}).map(function(e){return e});this.cache=Object.assign({},this.cache,{sections:t,results:n}),window.document.addEventListener("agcAction",this.handleAction.bind(this)),this.enterKeyHandler=(e=this.form,function(t){var n=document.querySelector(":focus"),i=Array.from(e.querySelectorAll("input, a, select, button, textarea")).map(function(e){return e});n.classList.contains("agc-wizard__actions-next")||function(){if(13===t.which&&!a(n,"textarea")){!i.indexOf(n)||a(n,"a")||a(n,"button")||t.preventDefault();var r=i[i.indexOf(n)+(t.shiftKey?-1:1)];r?r.focus():i[0].focus(),r&&"select"in r&&r.select(),n&&n.willValidate&&s(e,n.name)}}()}),window.document.addEventListener("keydown",this.enterKeyHandler,!1),this.showTab(0)},e.prototype.componentDidUnload=function(){window.document.removeEventListener("agcAction",this.handleAction),window.document.removeEventListener("keydown",this.enterKeyHandler)},Object.defineProperty(e,"is",{get:function(){return"agc-barley-harvest-loss"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{cache:{state:!0},currentStep:{state:!0},mode:{type:String,attr:"mode"},results:{state:!0},socket:{type:String,attr:"socket"},submitted:{state:!0},tract:{type:String,attr:"tract"},units:{type:"Any",attr:"units"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"agcCalculated",method:"agcCalculated",bubbles:!0,cancelable:!0,composed:!0},{name:"agcStepChanged",method:"agcStepChanged",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),e}();e.AgcBarleyHarvestLoss=n,Object.defineProperty(e,"__esModule",{value:!0})});